# covered module

COVERED_DIRPATH = src
COVERED_INCDIR = -I$(COVERED_DIRPATH)
INCDIR += $(COVERED_INCDIR)

# benchmark module
BENCHMARK_SRCFILES := $(wildcard $(COVERED_DIRPATH)/benchmark/*.c)
BENCHMARK_OBJECTS += $(BENCHMARK_SRCFILES:.c=.o)
BENCHMARK_SHARED_OBJECTS += $(BENCHMARK_SRCFILES:.c=.shared.o)
DEPS += $(BENCHMARK_SRCFILES:.c=.d)
CLEANS += $(BENCHMARK_OBJECTS) $(BENCHMARK_SHARED_OBJECTS)

# cache module
CACHE_SRCFILES := $(wildcard $(COVERED_DIRPATH)/cache/*.c) $(wildcard $(COVERED_DIRPATH)/cache/covered/*.c)
CACHE_OBJECTS += $(CACHE_SRCFILES:.c=.o)
CACHE_SHARED_OBJECTS += $(CACHE_SRCFILES:.c=.shared.o)
DEPS += $(CACHE_SRCFILES:.c=.d)
CLEANS += $(CACHE_OBJECTS) $(CACHE_SHARED_OBJECTS)

# cli module
CLI_SRCFILES := $(wildcard $(COVERED_DIRPATH)/cli/*.c)
CLI_OBJECTS += $(CLI_SRCFILES:.c=.o)
CLI_SHARED_OBJECTS += $(CLI_SRCFILES:.c=.shared.o)
DEPS += $(CLI_SRCFILES:.c=.d)
CLEANS += $(CLI_OBJECTS) $(CLI_SHARED_OBJECTS)

# cloud module
CLOUD_SRCFILES := $(wildcard $(COVERED_DIRPATH)/cloud/*.c) $(wildcard $(COVERED_DIRPATH)/cloud/data_server/*.c)
CLOUD_OBJECTS += $(CLOUD_SRCFILES:.c=.o)
CLOUD_SHARED_OBJECTS += $(CLOUD_SRCFILES:.c=.shared.o)
DEPS += $(CLOUD_SRCFILES:.c=.d)
CLEANS += $(CLOUD_OBJECTS) $(CLOUD_SHARED_OBJECTS)

# common module
COMMON_SRCFILES := $(wildcard $(COVERED_DIRPATH)/common/*.c)
COMMON_OBJECTS += $(COMMON_SRCFILES:.c=.o)
COMMON_SHARED_OBJECTS += $(COMMON_SRCFILES:.c=.shared.o)
DEPS += $(COMMON_SRCFILES:.c=.d)
CLEANS += $(COMMON_OBJECTS) $(COMMON_SHARED_OBJECTS)

# concurrency module
CONCURRENCY_SRCFILES := $(wildcard $(COVERED_DIRPATH)/concurrency/*.c)
CONCURRENCY_OBJECTS += $(CONCURRENCY_SRCFILES:.c=.o)
CONCURRENCY_SHARED_OBJECTS += $(CONCURRENCY_SRCFILES:.c=.shared.o)
DEPS += $(CONCURRENCY_SRCFILES:.c=.d)
CLEANS += $(CONCURRENCY_OBJECTS) $(CONCURRENCY_SHARED_OBJECTS)

# cooperation module
COOPERATION_SRCFILES := $(wildcard $(COVERED_DIRPATH)/cooperation/*.c) $(wildcard $(COVERED_DIRPATH)/cooperation/directory/*.c) $(wildcard $(COVERED_DIRPATH)/cooperation/msi/*.c)
COOPERATION_OBJECTS += $(COOPERATION_SRCFILES:.c=.o)
COOPERATION_SHARED_OBJECTS += $(COOPERATION_SRCFILES:.c=.shared.o)
DEPS += $(COOPERATION_SRCFILES:.c=.d)
CLEANS += $(COOPERATION_OBJECTS) $(COOPERATION_SHARED_OBJECTS)

# core module
CORE_SRCFILES := $(wildcard $(COVERED_DIRPATH)/core/*.c) $(wildcard $(COVERED_DIRPATH)/core/victim/*.c)
CORE_OBJECTS += $(CORE_SRCFILES:.c=.o)
CORE_SHARED_OBJECTS += $(CORE_SRCFILES:.c=.shared.o)
DEPS += $(CORE_SRCFILES:.c=.d)
CLEANS += $(CORE_OBJECTS) $(CORE_SHARED_OBJECTS)

# edge module
EDGE_SRCFILES := $(wildcard $(COVERED_DIRPATH)/edge/*.c) $(wildcard $(COVERED_DIRPATH)/edge/beacon_server/*.c) $(wildcard $(COVERED_DIRPATH)/edge/cache_server/*.c) $(wildcard $(COVERED_DIRPATH)/edge/invalidation_server/*.c)
EDGE_OBJECTS += $(EDGE_SRCFILES:.c=.o)
EDGE_SHARED_OBJECTS += $(EDGE_SRCFILES:.c=.shared.o)
DEPS += $(EDGE_SRCFILES:.c=.d)
CLEANS += $(EDGE_OBJECTS) $(EDGE_SHARED_OBJECTS)

# event module
EVENT_SRCFILES := $(wildcard $(COVERED_DIRPATH)/event/*.c)
EVENT_OBJECTS += $(EVENT_SRCFILES:.c=.o)
EVENT_SHARED_OBJECTS += $(EVENT_SRCFILES:.c=.shared.o)
DEPS += $(EVENT_SRCFILES:.c=.d)
CLEANS += $(EVENT_OBJECTS) $(EVENT_SHARED_OBJECTS)

# hash module
HASH_SRCFILES := $(wildcard $(COVERED_DIRPATH)/hash/*.c)
HASH_OBJECTS += $(HASH_SRCFILES:.c=.o)
HASH_SHARED_OBJECTS += $(HASH_SRCFILES:.c=.shared.o)
DEPS += $(HASH_SRCFILES:.c=.d)
CLEANS += $(HASH_OBJECTS) $(HASH_SHARED_OBJECTS)

# message module
MESSAGE_SRCFILES := $(wildcard $(COVERED_DIRPATH)/message/*.c) $(wildcard $(COVERED_DIRPATH)/message/data/global/*.c) $(wildcard $(COVERED_DIRPATH)/message/data/local/*.c) $(wildcard $(COVERED_DIRPATH)/message/data/redirected/*.c) $(wildcard $(COVERED_DIRPATH)/message/data/warmup/*.c) $(wildcard $(COVERED_DIRPATH)/message/control/cooperation/*.c) $(wildcard $(COVERED_DIRPATH)/message/control/benchmark/*.c)
MESSAGE_OBJECTS += $(MESSAGE_SRCFILES:.c=.o)
MESSAGE_SHARED_OBJECTS += $(MESSAGE_SRCFILES:.c=.shared.o)
DEPS += $(MESSAGE_SRCFILES:.c=.d)
CLEANS += $(MESSAGE_OBJECTS) $(MESSAGE_SHARED_OBJECTS)

# network module
NETWORK_SRCFILES := $(wildcard $(COVERED_DIRPATH)/network/*.c)
NETWORK_OBJECTS += $(NETWORK_SRCFILES:.c=.o)
NETWORK_SHARED_OBJECTS += $(NETWORK_SRCFILES:.c=.shared.o)
DEPS += $(NETWORK_SRCFILES:.c=.d)
CLEANS += $(NETWORK_OBJECTS) $(NETWORK_SHARED_OBJECTS)

# statistics module
STATISTICS_SRCFILES := $(wildcard $(COVERED_DIRPATH)/statistics/*.c)
STATISTICS_OBJECTS += $(STATISTICS_SRCFILES:.c=.o)
STATISTICS_SHARED_OBJECTS += $(STATISTICS_SRCFILES:.c=.shared.o)
DEPS += $(STATISTICS_SRCFILES:.c=.d)
CLEANS += $(STATISTICS_OBJECTS) $(STATISTICS_SHARED_OBJECTS)

# workload module
WORKLOAD_SRCFILES := $(wildcard $(COVERED_DIRPATH)/workload/*.c)
WORKLOAD_OBJECTS += $(WORKLOAD_SRCFILES:.c=.o)
WORKLOAD_SHARED_OBJECTS += $(WORKLOAD_SRCFILES:.c=.shared.o)
DEPS += $(WORKLOAD_SRCFILES:.c=.d)
CLEANS += $(WORKLOAD_OBJECTS) $(WORKLOAD_SHARED_OBJECTS)

COVERED_OBJECTS = $(BENCHMARK_OBJECTS) $(CACHE_OBJECTS) $(CLI_OBJECTS) $(CLOUD_OBJECTS) $(COMMON_OBJECTS) $(COOPERATION_OBJECTS) $(CORE_OBJECTS) $(EDGE_OBJECTS) $(EVENT_OBJECTS) $(HASH_OBJECTS) $(CONCURRENCY_OBJECTS) $(MESSAGE_OBJECTS) $(NETWORK_OBJECTS) $(STATISTICS_OBJECTS) $(WORKLOAD_OBJECTS)
LINK_OBJECTS += $(COVERED_OBJECTS)